# ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸

## ğŸ“… ä½œæˆæ—¥ãƒ»æ›´æ–°å±¥æ­´
- 2025-09-26: åˆç‰ˆä½œæˆï¼ˆå®Œå…¨å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«çµ±åˆè¨­è¨ˆï¼‰
- 2025-10-02: **é‡è¦æ›´æ–°** - ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆè¨­è¨ˆã¸ã®å¤‰æ›´
- 2025-10-06: **æœ€æ–°æ›´æ–°** - 2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒ—è¿½åŠ 

## æ¦‚è¦
**2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œã®SLMPç¶™ç¶šç›£è¦–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆSimpleMonitoringServiceï¼‰**ã«ãŠã„ã¦ã€æŠ€è¡“çš„è©³ç´°æƒ…å ±ã‚’çµ±åˆãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆrawdata_analysis.logï¼‰ã«çµ±åˆã—ã€åŠ ãˆã¦äººé–“å¯èª­ãªã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚’å°‚ç”¨JSONãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆterminal_output.txtï¼‰ã«åˆ†é›¢ä¿å­˜ã™ã‚‹ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆä»•æ§˜ã€‚

### ğŸ”„ 2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œæ¦‚è¦
- **å¾“æ¥**: 6ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ï¼ˆIntelligentMonitoringSystemï¼‰
- **æœ€æ–°**: 2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ï¼ˆSimpleMonitoringServiceï¼‰
- **å¯¾è±¡ç¯„å›²**: M000-M999, D000-D999å›ºå®šç¯„å›²ãƒ‡ãƒ¼ã‚¿å–å¾—
- **ãƒ­ã‚°æœ€é©åŒ–**: å›ºå®šç¯„å›²å‡¦ç†ã«ç‰¹åŒ–ã—ãŸã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒ—è¿½åŠ 

### ğŸ¯ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆã®ç›®çš„
1. **æŠ€è¡“æƒ…å ±çµ±åˆ**: SLMPé€šä¿¡ãƒ»è¨ºæ–­ãƒ»è©³ç´°æƒ…å ±ã‚’å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã«çµ±åˆ
2. **äººé–“å¯èª­æ€§**: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹é€ åŒ–ä¿å­˜
3. **ç”¨é€”åˆ¥æœ€é©åŒ–**: æŠ€è¡“è€…å‘ã‘è©³ç´°ãƒ­ã‚° + é‹ç”¨è€…å‘ã‘çŠ¶æ³ãƒ­ã‚°ã®ä¸¡ç«‹

## èƒŒæ™¯ãƒ»ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®å•é¡Œç‚¹
1. **æƒ…å ±ã®åˆ†æ•£**
   - `rawdata_analysis.log`: åŸºæœ¬é€šä¿¡ãƒ­ã‚°ï¼ˆç´„30%ã®æƒ…å ±é‡ï¼‰
   - `rawdata_analysis.json`: åŒã˜ãƒ‡ãƒ¼ã‚¿ã®é‡è¤‡å‡ºåŠ›
   - `terminal_output.txt`: è±Šå¯Œãªæƒ…å ±ï¼ˆç´„70%ãŒãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œãªã„ï¼‰

2. **SLMPãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿãƒ‡ãƒ¼ã‚¿ã®æ¬ è½**
   - `rawResponseData`ãŒå¸¸ã«`null`ã§`SlmpRawDataAnalyzer`ãŒå‹•ä½œã—ã¦ã„ãªã„
   - é€ä¿¡ãƒ»å—ä¿¡ãƒ•ãƒ¬ãƒ¼ãƒ ã®ç”Ÿãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ãªã„
   - è©³ç´°ãªãƒ•ãƒ¬ãƒ¼ãƒ è§£ææƒ…å ±ãŒæ¬ å¦‚

3. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹æƒ…å ±ã®æ¬ è½**
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã€è¨­å®šè©³ç´°ã€ã‚µã‚¤ã‚¯ãƒ«æƒ…å ±
   - å‡¦ç†çŠ¶æ³ã€çµ±è¨ˆæƒ…å ±ã€ã‚¨ãƒ©ãƒ¼è©³ç´°

## ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

### è¨­è¨ˆåŸå‰‡
1. **ç›®çš„åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«åˆ†é›¢**:
   - `rawdata_analysis.log`: SLMPæŠ€è¡“è©³ç´°ãƒ»é€šä¿¡ãƒ»è¨ºæ–­æƒ…å ±
   - `console_output.json`: äººé–“å¯èª­ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ãƒ»é€²è¡ŒçŠ¶æ³
2. **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¿ã‚¤ãƒ—åˆ¥ã®åˆ†é¡ã§è¦‹ã‚„ã™ã•ã‚’ç¢ºä¿
3. **æƒ…å ±ã®å®Œå…¨æ€§**: å…¨ã¦ã®æƒ…å ±ã‚’é©åˆ‡ãªãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†é¡ä¿å­˜
4. **æ¤œç´¢æ€§**: SessionIdã€CycleNumberç­‰ã«ã‚ˆã‚‹é–¢é€£ä»˜ã‘
5. **ç›¸äº’é€£æº**: ä¸¡ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«é–“ã§ã®æƒ…å ±é–¢é€£ä»˜ã‘

### ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¿ã‚¤ãƒ—åˆ†é¡ï¼ˆ2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œæ‹¡å¼µï¼‰

#### æ—¢å­˜ã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒ—ï¼ˆ6ã‚¹ãƒ†ãƒƒãƒ—ãƒ»2ã‚¹ãƒ†ãƒƒãƒ—å…±é€šï¼‰
1. **SESSION_START** - ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æƒ…å ±
2. **CYCLE_START** - ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹æƒ…å ±
3. **CYCLE_COMMUNICATION** - é€šä¿¡å®Ÿè¡Œè©³ç´°
4. **ERROR_OCCURRED** - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿè©³ç´°
5. **STATISTICS** - çµ±è¨ˆãƒ»ã‚µãƒãƒªãƒ¼æƒ…å ±
6. **PERFORMANCE_METRICS** - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è©³ç´°
7. **SESSION_END** - ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æƒ…å ±

#### ğŸ†• 2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å°‚ç”¨ã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒ—
8. **SIMPLE_MONITORING_START** - SimpleMonitoringServiceé–‹å§‹
9. **FIXED_RANGE_COMMUNICATION** - å›ºå®šç¯„å›²ï¼ˆM/Dï¼‰é€šä¿¡è©³ç´°
10. **DEVICE_BATCH_PROCESSING** - ãƒ‡ãƒã‚¤ã‚¹ãƒãƒƒãƒå‡¦ç†è©³ç´°
11. **MEMORY_OPTIMIZATION_METRICS** - ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–çµ±è¨ˆ

---

#### 1. SESSION_START - ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æƒ…å ±ï¼ˆ2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œï¼‰
```json
{
  "EntryType": "SESSION_START",
  "Timestamp": "2025-10-06T11:47:27.527+09:00",
  "SessionId": "session_20251006_114727",
  "SessionInfo": {
    "ProcessId": 13296,
    "ApplicationName": "Andon SLMP Client - 2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œ",
    "Version": "2.1.0-simple-monitoring",
    "Environment": "Production",
    "MonitoringMode": "SimpleMonitoring"
  },
  "ConfigurationDetails": {
    "ConfigFile": "appsettings.json",
    "ConnectionTarget": "172.30.40.15:8192",
    "SlmpSettings": "Port:8192, Binary, Version4E, UDP, RxTimeout:3000ms, ConnTimeout:10000ms, MaxReq:2",
    "MonitoringType": "2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ï¼ˆå›ºå®šç¯„å›²ï¼‰",
    "TargetDevices": "M000-M999, D000-D999",
    "ContinuityMode": "ReturnDefaultAndContinue",
    "RawDataLogging": "æœ‰åŠ¹",
    "LogOutputPath": "logs/rawdata_analysis.log",
    "MemoryOptimization": "æœ‰åŠ¹ï¼ˆ450KBåˆ¶é™ï¼‰"
  }
}
```

#### 2. CYCLE_START - ã‚µã‚¤ã‚¯ãƒ«é–‹å§‹æƒ…å ±ï¼ˆ2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œï¼‰
```json
{
  "EntryType": "CYCLE_START",
  "Timestamp": "2025-10-06T11:47:27.655+09:00",
  "SessionId": "session_20251006_114727",
  "CycleNumber": 1,
  "CycleInfo": {
    "StartMessage": "--- 2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ã‚µã‚¤ã‚¯ãƒ« 1 ---",
    "MonitoringType": "SimpleMonitoring",
    "TargetDevices": ["M000-M999", "D000-D999"],
    "IntervalFromPrevious": 1000.0,
    "ExpectedOperations": 2
  }
}
```

#### 3. CYCLE_COMMUNICATION - é€šä¿¡å®Ÿè¡Œè©³ç´°ï¼ˆ2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å¯¾å¿œï¼‰
```json
{
  "EntryType": "CYCLE_COMMUNICATION",
  "Timestamp": "2025-10-06T11:47:30.676+09:00",
  "SessionId": "session_20251006_114727",
  "CycleNumber": 1,
  "PhaseInfo": {
    "Phase": "FixedRangeRead",
    "StatusMessage": "M000-M999å›ºå®šç¯„å›²èª­ã¿å–ã‚Šä¸­...",
    "DeviceRange": "M000-M999",
    "BatchSize": 128
  },
  "CommunicationDetails": {
    "OperationType": "FixedRangeBitDeviceRead",
    "DeviceCode": "M",
    "StartAddress": 0,
    "DeviceCount": 1000,
    "BatchProcessing": true,
    "BatchesCompleted": 8,
    "TotalBatches": 8,
    "Values": "Array[1000] - M000-M999ãƒ‡ãƒ¼ã‚¿",
    "ResponseTimeMs": 1200.45,
    "Success": true,
    "MemoryUsage": "28KB",
    "OptimizationApplied": "ArrayPool+FixedRangeProcessor"
  },
  "RawDataAnalysis": {
    "RequestFrameHex": "5400000000FF03000C001400010400000000010001000064000000",
    "ResponseFrameHex": "D4000000000300020000000000000000",
    "HexDump": "00000000: D4 00 00 00 00 03 00 02  00 00 00 00 00 00 00 00 |................|\n",
    "FrameAnalysis": {
      "SubHeader": "0x00D4",
      "SubHeaderDescription": "4Eãƒ•ãƒ¬ãƒ¼ãƒ ",
      "NetworkNumber": 0,
      "PcNumber": 3,
      "UnitIONumber": "0x0002",
      "UnitStationNumber": 0,
      "ResponseDataLength": 2,
      "EndCode": "0x0000",
      "EndCodeDescription": "æ­£å¸¸çµ‚äº†",
      "DataSection": "0000000000000000"
    },
    "DataSectionAnalysis": {
      "DataType": "BitDeviceData",
      "Details": [
        {
          "Byte": 0,
          "Value": "0x00",
          "Binary": "00000000",
          "Bits": "All OFF"
        },
        {
          "Byte": 1,
          "Value": "0x00",
          "Binary": "00000000",
          "Bits": "All OFF"
        }
      ]
    }
  },
  "ProcessingResult": {
    "InterpretedValue": "ã‚»ãƒ³ã‚µãƒ¼çŠ¶æ…‹: [False, False, False, False, False, False, False, False]",
    "ProcessingStatus": "âœ“ ãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚ŠæˆåŠŸ - æ­£å¸¸å‡¦ç†ç¶™ç¶š",
    "LogMessages": [
      "âœ“ é€šä¿¡æˆåŠŸ: M100 èª­ã¿å–ã‚Šå®Œäº†",
      "  å€¤: [OFF, OFF, OFF, OFF, OFF, OFF, OFF, OFF]",
      "  Binary: [00000000]",
      "  å¿œç­”æ™‚é–“: 3017.37ms"
    ]
  }
}
```

#### 4. ERROR_OCCURRED - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚è©³ç´°
```json
{
  "EntryType": "ERROR_OCCURRED",
  "Timestamp": "2025-09-26T14:25:12.123+09:00",
  "SessionId": "session_20250926_114727",
  "CycleNumber": 25,
  "ErrorDetails": {
    "ErrorType": "CommunicationTimeout",
    "ErrorMessage": "SocketException - æ¥ç¶šãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ",
    "DeviceAddress": "M100",
    "OperationType": "BitDeviceRead",
    "AttemptCount": 3,
    "ResponseTimeMs": 3000.0,
    "ContinuityAction": "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ç¶™ç¶šä¸­",
    "EstimatedCause": "ä¸€æ™‚çš„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶"
  },
  "RecoveryInfo": {
    "AutoRecoveryEnabled": true,
    "RecoveryStatus": "è‡ªå‹•å›å¾©è©¦è¡Œä¸­...",
    "DefaultValueReturned": [false, false, false, false, false, false, false, false]
  }
}
```

#### 5. STATISTICS - çµ±è¨ˆãƒ»ã‚µãƒãƒªãƒ¼æƒ…å ±
```json
{
  "EntryType": "STATISTICS",
  "Timestamp": "2025-09-26T11:47:43.210+09:00",
  "SessionId": "session_20250926_114727",
  "StatisticsType": "SESSION_SUMMARY",
  "StatisticsInfo": {
    "ExecutedCycles": 2,
    "TotalCommunications": 4,
    "SuccessfulCommunications": 4,
    "FailedCommunications": 0,
    "SuccessRate": "100%",
    "AverageResponseTime": 2581.6,
    "MinResponseTime": 0.35,
    "MaxResponseTime": 3017.37,
    "TotalExecutionTime": "00:00:15.583",
    "CommunicationsByType": {
      "BitDeviceRead": 2,
      "WordDeviceRead": 2
    }
  },
  "SystemStatus": {
    "RawDataLogging": "æœ‰åŠ¹",
    "ContinuousMonitoring": "æœ‰åŠ¹ (Ctrl+C ã§åœæ­¢)",
    "FinalStatus": "âœ“ ã‚·ã‚¹ãƒ†ãƒ ã¯å…¨æœŸé–“ã‚’é€šã˜ã¦å‹•ä½œã—ç¶šã‘ã¾ã—ãŸï¼",
    "FinalMessage": "è£½é€ ãƒ©ã‚¤ãƒ³ã®ç¨¼åƒã‚’æ­¢ã‚ã‚‹ã“ã¨ãªãç›£è¦–ãŒå®Œäº†ã—ã¾ã—ãŸã€‚"
  }
}
```

#### 6. PERFORMANCE_METRICS - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è©³ç´°
```json
{
  "EntryType": "PERFORMANCE_METRICS",
  "Timestamp": "2025-09-26T11:47:43.210+09:00",
  "SessionId": "session_20250926_114727",
  "PerformanceData": {
    "NetworkQuality": {
      "PacketLoss": 0,
      "AverageLatency": 2.3,
      "MaxLatency": 24.3,
      "ConnectionStability": "Excellent"
    },
    "SlmpPerformance": {
      "FrameProcessingTime": 0.5,
      "DataParsingTime": 0.2,
      "ResponseValidationTime": 0.1
    },
    "SystemResource": {
      "MemoryUsage": "15.2MB",
      "CpuUsage": "2.1%",
      "ThreadCount": 5
    }
  }
}
```

#### 7. SESSION_END - ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æƒ…å ±
```json
{
  "EntryType": "SESSION_END",
  "Timestamp": "2025-10-06T11:47:43.213+09:00",
  "SessionId": "session_20251006_114727",
  "SessionSummary": {
    "Duration": "00:00:15.686",
    "FinalStatus": "æ­£å¸¸çµ‚äº†",
    "ExitReason": "ãƒ¦ãƒ¼ã‚¶ãƒ¼åœæ­¢è¦æ±‚ (Ctrl+C)",
    "TotalLogEntries": 52,
    "MonitoringMode": "2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼",
    "ProcessedDevices": "M000-M999, D000-D999",
    "MemoryPeakUsage": "450KB",
    "FinalMessage": "2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ç›£è¦–ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†"
  }
}
```

---

## ğŸ†• 2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å°‚ç”¨ã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒ—è©³ç´°

#### 8. SIMPLE_MONITORING_START - SimpleMonitoringServiceé–‹å§‹
```json
{
  "EntryType": "SIMPLE_MONITORING_START",
  "Timestamp": "2025-10-06T11:47:28.123+09:00",
  "SessionId": "session_20251006_114727",
  "ServiceInfo": {
    "ServiceName": "SimpleMonitoringService",
    "Version": "2.1.0",
    "MonitoringMode": "FixedRange",
    "TargetDevices": {
      "MDeviceRange": "M000-M999 (1000ãƒ‡ãƒã‚¤ã‚¹)",
      "DDeviceRange": "D000-D999 (1000ãƒ‡ãƒã‚¤ã‚¹)"
    },
    "OptimizationSettings": {
      "MemoryOptimizer": "æœ‰åŠ¹",
      "ArrayPool": "æœ‰åŠ¹",
      "FixedRangeProcessor": "æœ‰åŠ¹",
      "ExpectedMemoryUsage": "450KBä»¥ä¸‹"
    },
    "MonitoringInterval": 1000,
    "StartMessage": "2ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ç›£è¦–é–‹å§‹"
  }
}
```

#### 9. FIXED_RANGE_COMMUNICATION - å›ºå®šç¯„å›²ï¼ˆM/Dï¼‰é€šä¿¡è©³ç´°
```json
{
  "EntryType": "FIXED_RANGE_COMMUNICATION",
  "Timestamp": "2025-10-06T11:47:29.456+09:00",
  "SessionId": "session_20251006_114727",
  "CycleNumber": 1,
  "FixedRangeDetails": {
    "DeviceType": "BitDevice",
    "DeviceCode": "M",
    "RangeDefinition": {
      "StartAddress": 0,
      "EndAddress": 999,
      "TotalCount": 1000
    },
    "BatchProcessing": {
      "OptimalBatchSize": 128,
      "TotalBatches": 8,
      "ProcessingMode": "Parallel"
    },
    "Performance": {
      "ProcessingTimeMs": 1200.45,
      "MemoryUsedKB": 28,
      "ArrayPoolHits": 8,
      "GCCollections": 0
    },
    "Results": {
      "SuccessfulReads": 1000,
      "FailedReads": 0,
      "NonZeroValues": 0,
      "ProcessingStatus": "å®Œå…¨æˆåŠŸ"
    }
  }
}
```

#### 10. DEVICE_BATCH_PROCESSING - ãƒ‡ãƒã‚¤ã‚¹ãƒãƒƒãƒå‡¦ç†è©³ç´°
```json
{
  "EntryType": "DEVICE_BATCH_PROCESSING",
  "Timestamp": "2025-10-06T11:47:30.789+09:00",
  "SessionId": "session_20251006_114727",
  "CycleNumber": 1,
  "BatchDetails": {
    "BatchId": "batch_M_001",
    "DeviceCode": "M",
    "BatchRange": {
      "StartAddress": 0,
      "Count": 128,
      "EndAddress": 127
    },
    "ProcessingInfo": {
      "BufferSize": "1024 bytes",
      "ArrayPoolUsed": true,
      "MemoryOptimized": true,
      "ProcessingTimeMs": 150.23
    },
    "CommunicationFrame": {
      "RequestSize": 32,
      "ResponseSize": 48,
      "FrameType": "4E",
      "EndCode": "0x0000"
    },
    "BatchResult": {
      "Success": true,
      "ValuesRead": 128,
      "NonZeroCount": 0,
      "ProcessingStatus": "æ­£å¸¸å®Œäº†"
    }
  }
}
```

#### 11. MEMORY_OPTIMIZATION_METRICS - ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–çµ±è¨ˆ
```json
{
  "EntryType": "MEMORY_OPTIMIZATION_METRICS",
  "Timestamp": "2025-10-06T11:47:35.012+09:00",
  "SessionId": "session_20251006_114727",
  "CycleNumber": 1,
  "MemoryMetrics": {
    "CurrentUsage": {
      "TotalMemoryKB": 445,
      "ArrayPoolUsageKB": 256,
      "FixedRangeBuffersKB": 128,
      "ConnectionPoolKB": 61
    },
    "OptimizationStats": {
      "ArrayPoolHitRate": "98.5%",
      "MemoryReusedBytes": 1048576,
      "GCPrevented": 15,
      "BufferAllocationsAvoided": 32
    },
    "Performance": {
      "AllocationSpeedupPercent": 92,
      "MemoryFootprintReduction": "99.96%",
      "GCPressureReduction": "98%"
    },
    "Comparison": {
      "BeforeOptimization": "10.2MB",
      "AfterOptimization": "445KB",
      "ImprovementFactor": "22.9x"
    }
  }
}
```

## å«ã¾ã‚Œã‚‹å…¨æƒ…å ±ã‚«ãƒ†ã‚´ãƒªãƒ¼

### 1. SLMPãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿
- **é€ä¿¡ãƒ•ãƒ¬ãƒ¼ãƒ **: å®Œå…¨ãª16é€²æ•°è¡¨ç¾
- **å—ä¿¡ãƒ•ãƒ¬ãƒ¼ãƒ **: å®Œå…¨ãª16é€²æ•°è¡¨ç¾
- **16é€²æ•°ãƒ€ãƒ³ãƒ—**: ã‚¢ãƒ‰ãƒ¬ã‚¹ä»˜ãã€ASCIIè¡¨ç¾ä»˜ã
- **ãƒ•ãƒ¬ãƒ¼ãƒ è§£æ**: ãƒ˜ãƒƒãƒ€ãƒ¼ã€çµ‚äº†ã‚³ãƒ¼ãƒ‰ã€ãƒ‡ãƒ¼ã‚¿éƒ¨è©³ç´°

### 2. è©³ç´°SLMPãƒ•ãƒ¬ãƒ¼ãƒ è§£æ
- **ã‚µãƒ–ãƒ˜ãƒƒãƒ€ãƒ¼è§£æ**: 3E/4Eãƒ•ãƒ¬ãƒ¼ãƒ åˆ¤å®š
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç•ªå·ã€PCç•ªå·ã€ãƒ¦ãƒ‹ãƒƒãƒˆæƒ…å ±
- **çµ‚äº†ã‚³ãƒ¼ãƒ‰è©³ç´°**: ã‚¨ãƒ©ãƒ¼åŸå› ã®å…·ä½“çš„èª¬æ˜
- **ãƒ‡ãƒ¼ã‚¿éƒ¨è§£æ**: ãƒ¯ãƒ¼ãƒ‰/ãƒ“ãƒƒãƒˆåˆ¥ã®è©³ç´°è§£æ

### 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹æƒ…å ±
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±**: é–‹å§‹/çµ‚äº†ã€ãƒ—ãƒ­ã‚»ã‚¹IDã€å®Ÿè¡Œæ™‚é–“
- **è¨­å®šæƒ…å ±è©³ç´°**: SLMPè¨­å®šã€ç¶™ç¶šãƒ¢ãƒ¼ãƒ‰ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç­‰
- **ã‚µã‚¤ã‚¯ãƒ«æƒ…å ±**: ã‚µã‚¤ã‚¯ãƒ«ç•ªå·ã€ãƒ•ã‚§ãƒ¼ã‚ºã€é–“éš”
- **å‡¦ç†çŠ¶æ³**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€çŠ¶æ…‹å¤‰åŒ–

### 4. çµ±è¨ˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±
- **å®Ÿè¡Œçµ±è¨ˆ**: ã‚µã‚¤ã‚¯ãƒ«æ•°ã€æˆåŠŸç‡ã€å¤±æ•—ç‡
- **å¿œç­”æ™‚é–“åˆ†æ**: å¹³å‡ã€æœ€å¤§ã€æœ€å°ã€åˆ†å¸ƒ
- **ã‚¨ãƒ©ãƒ¼çµ±è¨ˆ**: ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥ã€é »åº¦ã€å›å¾©çŠ¶æ³
- **ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŠ¶æ³**: ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### 5. è¨­å®šæƒ…å ±ã®è©³ç´°
- **SLMPæ¥ç¶šè¨­å®š**: å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è©³ç´°
- **ç¶™ç¶šå‹•ä½œè¨­å®š**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»ãƒªãƒˆãƒ©ã‚¤è¨­å®š**: å…¨è¨­å®šå€¤
- **ãƒ­ã‚°è¨­å®š**: å‡ºåŠ›å…ˆã€ãƒ¬ãƒ™ãƒ«ã€ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

### 6. ã‚¨ãƒ©ãƒ¼ãƒ»ä¾‹å¤–æƒ…å ±ã®è©³ç´°
- **ã‚¨ãƒ©ãƒ¼åˆ†é¡**: é€šä¿¡ã‚¨ãƒ©ãƒ¼ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€è¨­å®šã‚¨ãƒ©ãƒ¼ç­‰
- **ç¶™ç¶šæ©Ÿèƒ½å‹•ä½œ**: ã‚¨ãƒ©ãƒ¼å‡¦ç†ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¿”å´
- **ãƒªãƒˆãƒ©ã‚¤å‡¦ç†**: è©¦è¡Œå›æ•°ã€é–“éš”ã€çµæœ
- **å›å¾©å‡¦ç†**: è‡ªå‹•å›å¾©ã€çŠ¶æ…‹å¾©æ—§

### 7. æ™‚ç³»åˆ—ãƒ»é–¢é€£æƒ…å ±
- **SessionId**: é–¢é€£ãƒ­ã‚°ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
- **CycleNumber**: ã‚µã‚¤ã‚¯ãƒ«å†…ã®å‡¦ç†é †åº
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—**: ãƒŸãƒªç§’ç²¾åº¦ã®æ™‚åˆ»æƒ…å ±
- **å‡¦ç†é–“éš”**: ãƒ•ã‚§ãƒ¼ã‚ºé–“ã€ã‚µã‚¤ã‚¯ãƒ«é–“ã®æ™‚é–“

### 8. ãƒ‡ãƒã‚¤ã‚¹è§£é‡ˆæƒ…å ±
- **ç”Ÿãƒ‡ãƒ¼ã‚¿**: ãƒã‚¤ãƒŠãƒªã€16é€²æ•°ã€æ•°å€¤è¡¨ç¾
- **è§£é‡ˆçµæœ**: äººé–“ãŒèª­ã‚ã‚‹å½¢å¼ã¸ã®å¤‰æ›
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¤å®š**: ON/OFFã€æ­£å¸¸/ç•°å¸¸ç­‰
- **å¤‰åŒ–æ¤œå‡º**: å‰å›å€¤ã¨ã®æ¯”è¼ƒã€å¤‰åŒ–é€šçŸ¥

### 9. è¨ºæ–­æƒ…å ±ï¼ˆæ‹¡å¼µæº–å‚™ï¼‰
- **PLCæ¥ç¶šè¨ºæ–­**: æ¥ç¶šçŠ¶æ…‹ã€å“è³ªè©•ä¾¡
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨ºæ–­**: åˆ°é”æ€§ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å“è³ª
- **é€šä¿¡å“è³ªåˆ†æ**: ãƒ‘ã‚±ãƒƒãƒˆãƒ­ã‚¹ã€é…å»¶åˆ†æ
- **ç•°å¸¸æ¤œå‡º**: ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æã€äºˆå…†æ¤œå‡º

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºãƒ—ãƒ©ãƒ³

### Phase 1: JSONå‡ºåŠ›å»ƒæ­¢ã¨ãƒ­ã‚°çµ±åˆåŸºç›¤
1. **è¨­å®šå¤‰æ›´**
   - `appsettings.json`ã§`EnableJsonExport = false`
   - JSONé–¢é€£å‡¦ç†ã®å‰Šé™¤

2. **çµ±åˆãƒ­ã‚°åŸºç›¤å®Ÿè£…**
   - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¿ã‚¤ãƒ—åˆ¥å‡ºåŠ›æ§‹é€ 
   - SessionIdç”Ÿæˆãƒ»ç®¡ç†
   - CycleNumberè¿½è·¡

### Phase 2: æ¬ è½æƒ…å ±ã®å®Ÿè£…
1. **SLMPãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿãƒ‡ãƒ¼ã‚¿å–å¾—**
   - `SlmpClientWithTestLogging`ã§ã®å®Ÿéš›ã®rawDataå–å¾—
   - é€ä¿¡ãƒ»å—ä¿¡ä¸¡æ–¹ã®ãƒ•ãƒ¬ãƒ¼ãƒ è¨˜éŒ²
   - `SlmpRawDataAnalyzer`ã®æ­£å¸¸å‹•ä½œ

2. **è©³ç´°ãƒ•ãƒ¬ãƒ¼ãƒ è§£æçµ±åˆ**
   - æ—¢å­˜ã®`SlmpRawDataAnalyzer`æ©Ÿèƒ½ã‚’ãƒ­ã‚°ã«çµ±åˆ
   - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è©³ç´°èª¬æ˜
   - ãƒ‡ãƒ¼ã‚¿éƒ¨ã®å®Œå…¨è§£æ

### Phase 3: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æƒ…å ±ã®å®Œå…¨çµ±åˆ
1. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹çµ±åˆ**
   - `ContinuityExample.cs`ã®æ‹¡å¼µ
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€è¨­å®šæƒ…å ±å‡ºåŠ›
   - ã‚µã‚¤ã‚¯ãƒ«ãƒ»ãƒ•ã‚§ãƒ¼ã‚ºæƒ…å ±çµ±åˆ

2. **çµ±è¨ˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±åˆ**
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆè¨ˆç®—
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¿½åŠ 
   - ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŠ¶æ³ç›£è¦–

### Phase 4: è¦‹ã‚„ã™ã•ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
1. **å‡ºåŠ›æœ€é©åŒ–**
   - æ§‹é€ åŒ–ã•ã‚ŒãŸJSONå½¢å¼ã§ã®å‡ºåŠ›
   - æƒ…å ±ãƒ¬ãƒ™ãƒ«åˆ¥ã®åˆ¶å¾¡
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç®¡ç†

2. **æ¤œç´¢ãƒ»åˆ†ææ©Ÿèƒ½**
   - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¿ã‚¤ãƒ—åˆ¥ãƒ•ã‚£ãƒ«ã‚¿
   - SessionId/CycleNumberæ¤œç´¢
   - çµ±è¨ˆãƒ‡ãƒ¼ã‚¿æŠ½å‡º

## æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### 1. æƒ…å ±ã®å®Œå…¨æ€§
- **ç¾åœ¨30% â†’ 100%**: å…¨ã¦ã®æƒ…å ±ãŒå˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã§ç¢ºèªå¯èƒ½
- **ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚¹ãªã—**: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ã®å…¨æƒ…å ±ã‚’ä¿æŒ
- **è¨ºæ–­æƒ…å ±**: å•é¡Œç™ºç”Ÿæ™‚ã®å®Œå…¨ãªçŠ¶æ³æŠŠæ¡

### 2. é‹ç”¨åŠ¹ç‡ã®å‘ä¸Š
- **å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†**: ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã®å‰Šæ¸›ï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ« â†’ 1ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- **æ¤œç´¢æ€§å‘ä¸Š**: æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã§ã®é«˜é€Ÿæ¤œç´¢
- **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: å•é¡ŒåŸå› ã®è¿…é€Ÿãªç‰¹å®š

### 3. å°†æ¥æ‹¡å¼µæ€§
- **è¨ºæ–­æ©Ÿèƒ½è¿½åŠ **: PLCæ¥ç¶šè¨ºæ–­ã®çµ±åˆæº–å‚™
- **åˆ†ææ©Ÿèƒ½**: çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•åˆ†æ
- **ç›£è¦–æ©Ÿèƒ½**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç•°å¸¸æ¤œå‡º

## å®Ÿè£…å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

### A. æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µ
1. **ContinuityExample.cs**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€çµ±è¨ˆå‡ºåŠ›ã®è¿½åŠ 
2. **RealMachineTestLogger.cs**: çµ±åˆãƒ­ã‚°å‡ºåŠ›ã®å®Ÿè£…
3. **SlmpClientWithTestLogging.cs**: ç”Ÿãƒ‡ãƒ¼ã‚¿å–å¾—ã®å®Ÿè£…
4. **appsettings.json**: JSONå‡ºåŠ›ç„¡åŠ¹åŒ–

### B. æ–°è¦ä½œæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
1. **UnifiedLogWriter.cs**: çµ±åˆãƒ­ã‚°å‡ºåŠ›å°‚ç”¨ã‚¯ãƒ©ã‚¹
2. **SessionManager.cs**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚¯ãƒ©ã‚¹
3. **PerformanceMonitor.cs**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚¯ãƒ©ã‚¹

## å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆå¾Œï¼‰

### æŠ€è¡“è©³ç´°ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
- **rawdata_analysis.log**: SLMPæŠ€è¡“è©³ç´°æƒ…å ±çµ±åˆãƒ•ã‚¡ã‚¤ãƒ«
  - ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±
  - é€šä¿¡è©³ç´°ï¼ˆç”Ÿãƒ‡ãƒ¼ã‚¿å«ã‚€ï¼‰
  - ãƒ•ãƒ¬ãƒ¼ãƒ è§£æè©³ç´°
  - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
  - çµ±è¨ˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±
  - ã‚¨ãƒ©ãƒ¼ãƒ»è¨ºæ–­æƒ…å ±

### äººé–“å¯èª­ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«
- **console_output.json**: æ§‹é€ åŒ–ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«
  - ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•ãƒ»çµ‚äº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  - 6ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼é€²è¡ŒçŠ¶æ³
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘å®Ÿè¡Œçµæœ
  - ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  - å®Ÿè¡Œã‚µãƒãƒªãƒ¼æƒ…å ±

### ğŸ“Š å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä»•æ§˜æ›´æ–°ï¼ˆ2025å¹´10æœˆ2æ—¥ï¼‰

#### çµ±ä¸€å¾Œã®å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
1. **logs/rawdata_analysis.log** - çµ±åˆãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
2. **logs/rawdata_analysis.json** - JSONæ§‹é€ åŒ–ãƒ­ã‚°ï¼ˆå¾©æ´»ãƒ»å¿…é ˆï¼‰
3. **logs/terminal_output.txt** - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆçµ±ä¸€ï¼‰

#### å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«çµ±ä¸€æ–¹é‡
- **terminal_output.txtå½¢å¼ã¸ã®çµ±ä¸€**: `console_output.json` â†’ `terminal_output.txt`
- **JSONå‡ºåŠ›ã®å¾©æ´»**: é‹ç”¨æ€§å‘ä¸Šã®ãŸã‚ `rawdata_analysis.json` ã‚’å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å¾©æ´»
- **ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«æœŸå¾…å€¤ã¨ã®æ•´åˆ**: `run_rawdata_logging.bat` ã§æœŸå¾…ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã«çµ±ä¸€

#### ä¿®æ­£ã•ã‚ŒãŸè¨­å®šé …ç›®
```json
// appsettings.json - ä¿®æ­£å¾Œã®è¨­å®š
{
  "UnifiedLoggingSettings": {
    "LogFilePath": "logs/rawdata_analysis.log",
    "JsonExportPath": "logs/rawdata_analysis.json",
    "EnableJsonExport": true
  },
  "IntegratedOutput": {
    "OutputFilePath": "logs/terminal_output.txt",
    "EnableOutput": true,
    "OutputFormat": "text"
  }
}
```

### å‰Šé™¤ãƒ»ç§»è¡Œå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæ›´æ–°ï¼‰
- ~~console_output.json~~ â†’ **terminal_output.txt**ã«çµ±ä¸€
- **rawdata_analysis.json** - çµ±åˆã«ã‚ˆã‚Šå‰Šé™¤äºˆå®šã ã£ãŸãŒã€é‹ç”¨æ€§å‘ä¸Šã®ãŸã‚å¾©æ´»

## ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›JSONä¿å­˜ã‚·ã‚¹ãƒ†ãƒ è©³ç´°è¨­è¨ˆ

### ğŸ“‹ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¿ã‚¤ãƒ—å®šç¾©

#### 1. CONSOLE_INFO - ä¸€èˆ¬æƒ…å ±å‡ºåŠ›
```json
{
  "EntryType": "CONSOLE_INFO",
  "Timestamp": "2025-10-02T10:30:15.123+09:00",
  "SessionId": "session_20251002_103015",
  "Level": "Information",
  "Category": "SystemStatus",
  "Message": "âœ… ä¾å­˜æ€§æ³¨å…¥è¨­å®šå®Œäº† - IntelligentMonitoringSystemæº–å‚™å®Œäº†",
  "Context": {
    "StepNumber": null,
    "PhaseInfo": "Initialization"
  }
}
```

#### 2. CONSOLE_PROGRESS - é€²è¡ŒçŠ¶æ³å‡ºåŠ›
```json
{
  "EntryType": "CONSOLE_PROGRESS",
  "Timestamp": "2025-10-02T10:30:20.456+09:00",
  "SessionId": "session_20251002_103015",
  "Level": "Information",
  "Category": "StepProgress",
  "Message": "ğŸš€ 6ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œé–‹å§‹",
  "Context": {
    "StepNumber": 1,
    "PhaseInfo": "Step1_ConfigurationLoad",
    "ProgressPercentage": 16.7
  }
}
```

#### 3. CONSOLE_RESULT - å®Ÿè¡Œçµæœå‡ºåŠ›
```json
{
  "EntryType": "CONSOLE_RESULT",
  "Timestamp": "2025-10-02T10:30:45.789+09:00",
  "SessionId": "session_20251002_103015",
  "Level": "Information",
  "Category": "StepResult",
  "Message": "Step 4å®Œäº†: ç·ã‚¹ã‚­ãƒ£ãƒ³æ•° 45,056å€‹, ã‚¢ã‚¯ãƒ†ã‚£ãƒ– 0å€‹ã‚’æ¤œå‡º",
  "Context": {
    "StepNumber": 4,
    "PhaseInfo": "Step4_DeviceScan",
    "ResultData": {
      "TotalScanned": 45056,
      "ActiveDevices": 0,
      "ScanDuration": "2.5s"
    }
  }
}
```

#### 4. CONSOLE_ERROR - ã‚¨ãƒ©ãƒ¼å‡ºåŠ›
```json
{
  "EntryType": "CONSOLE_ERROR",
  "Timestamp": "2025-10-02T10:30:25.234+09:00",
  "SessionId": "session_20251002_103015",
  "Level": "Error",
  "Category": "Communication",
  "Message": "âŒ Step 2ã§ReadTypeNameå¤±æ•—ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã‚’å®Ÿè¡Œ",
  "Context": {
    "StepNumber": 2,
    "PhaseInfo": "Step2_DeviceInfo",
    "ErrorDetails": {
      "ErrorType": "SlmpCommunicationException",
      "FallbackAction": "Q00CPUæ¨å®šã§ç¶™ç¶š"
    }
  }
}
```

#### 5. CONSOLE_HEADER - ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼å‡ºåŠ›
```json
{
  "EntryType": "CONSOLE_HEADER",
  "Timestamp": "2025-10-02T10:30:10.000+09:00",
  "SessionId": "session_20251002_103015",
  "Level": "Information",
  "Category": "SystemHeader",
  "Message": "SLMP ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  v2.0",
  "Context": {
    "HeaderType": "ApplicationTitle",
    "Version": "2.0",
    "SubTitle": "å…¨39ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œãƒ»å®Œå…¨æ¢ç´¢ã‚·ã‚¹ãƒ†ãƒ "
  }
}
```

### ğŸ—ï¸ ConsoleOutputManager å®Ÿè£…è¨­è¨ˆ

#### ã‚¯ãƒ©ã‚¹æ§‹é€ 
```csharp
namespace SlmpClient.Core
{
    public class ConsoleOutputManager : IAsyncDisposable
    {
        private readonly ILogger<ConsoleOutputManager> _logger;
        private readonly string _outputFilePath;
        private readonly JsonSerializerOptions _jsonOptions;
        private readonly Channel<ConsoleEntry> _outputQueue;
        private readonly SemaphoreSlim _writeSemaphore;
        private readonly CancellationTokenSource _cancellationTokenSource;
        private Task? _backgroundWriter;

        public ConsoleOutputManager(ILogger<ConsoleOutputManager> logger,
                                   IConfiguration configuration);

        public Task WriteInfoAsync(string message, string category = "General",
                                  int? stepNumber = null, object? context = null);
        public Task WriteProgressAsync(string message, int stepNumber,
                                      string phaseInfo, double? progressPercentage = null);
        public Task WriteResultAsync(string message, int stepNumber,
                                    string phaseInfo, object? resultData = null);
        public Task WriteErrorAsync(string message, string category = "General",
                                   int? stepNumber = null, object? errorDetails = null);
        public Task WriteHeaderAsync(string message, string headerType,
                                    object? context = null);

        private Task ProcessOutputQueueAsync();
        private async Task WriteEntryToFileAsync(ConsoleEntry entry);
    }
}
```

#### ConsoleEntry ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```csharp
namespace SlmpClient.Core
{
    public class ConsoleEntry
    {
        public string EntryType { get; set; } = string.Empty;
        public DateTime Timestamp { get; set; } = DateTime.Now;
        public string SessionId { get; set; } = string.Empty;
        public string Level { get; set; } = "Information";
        public string Category { get; set; } = "General";
        public string Message { get; set; } = string.Empty;
        public ConsoleContext? Context { get; set; }
    }

    public class ConsoleContext
    {
        public int? StepNumber { get; set; }
        public string? PhaseInfo { get; set; }
        public double? ProgressPercentage { get; set; }
        public object? ResultData { get; set; }
        public object? ErrorDetails { get; set; }
        public string? HeaderType { get; set; }
        public string? Version { get; set; }
        public string? SubTitle { get; set; }
    }
}
```

### ğŸ“ Program.csçµ±åˆå®Ÿè£…

#### Console.WriteLineç½®ãæ›ãˆå®Ÿè£…
```csharp
public class Program
{
    private static ConsoleOutputManager? _consoleOutputManager;

    public static async Task<int> Main(string[] args)
    {
        // ConsoleOutputManageråˆæœŸåŒ–
        var config = LoadConfiguration();
        var loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());
        _consoleOutputManager = new ConsoleOutputManager(
            loggerFactory.CreateLogger<ConsoleOutputManager>(), config);

        // ãƒ˜ãƒƒãƒ€ãƒ¼å‡ºåŠ›ï¼ˆæ—¢å­˜ã®Console.WriteLineã‚’ç½®ãæ›ãˆï¼‰
        await _consoleOutputManager.WriteHeaderAsync(
            "SLMP ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  v2.0",
            "ApplicationTitle",
            new { Version = "2.0", SubTitle = "å…¨39ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œãƒ»å®Œå…¨æ¢ç´¢ã‚·ã‚¹ãƒ†ãƒ " });

        // é€šå¸¸ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚‚åŒæ™‚å®Ÿè¡Œ
        Console.WriteLine("===================================================");
        Console.WriteLine("    SLMP ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  v2.0");
        Console.WriteLine("    å…¨39ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œãƒ»å®Œå…¨æ¢ç´¢ã‚·ã‚¹ãƒ†ãƒ ");
        Console.WriteLine("===================================================");

        try
        {
            await _consoleOutputManager.WriteInfoAsync(
                "å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰: IntelligentMonitoring (6ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼)", "SystemMode");
            Console.WriteLine("å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰: IntelligentMonitoring (6ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼)");

            await RunIntelligentMonitoringAsync(config, loggerFactory);

            await _consoleOutputManager.WriteInfoAsync("å®Ÿè¡Œå®Œäº†", "SystemStatus");
            Console.WriteLine("å®Ÿè¡Œå®Œäº†");

            return 0;
        }
        catch (Exception ex)
        {
            await _consoleOutputManager.WriteErrorAsync(
                $"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {ex.Message}", "SystemError",
                errorDetails: new { ExceptionType = ex.GetType().Name, StackTrace = ex.StackTrace });
            Console.WriteLine($"âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {ex.Message}");
            return 1;
        }
        finally
        {
            await _consoleOutputManager.DisposeAsync();
        }
    }
}
```

### âš™ï¸ appsettings.jsonè¨­å®šæ‹¡å¼µ

```json
{
  "PlcConnection": {
    // æ—¢å­˜è¨­å®š...
  },
  "ConsoleOutputSettings": {
    "EnableCapture": true,
    "OutputFilePath": "logs/console_output.json",
    "OutputLevel": "Information",
    "EnableFileRotation": true,
    "MaxFileSizeMB": 10,
    "MaxFileCount": 5,
    "FlushIntervalMs": 1000
  },
  "UnifiedLoggingSettings": {
    // æ—¢å­˜çµ±åˆãƒ­ã‚°è¨­å®š...
  }
}
```

### ğŸ§ª å®Œå…¨å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆæ‰‹é †

#### Phase 1: ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
1. **ConsoleOutputManager.csä½œæˆ**
   ```bash
   # ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå ´æ‰€
   C:\Users\1010821\Desktop\python\andon\andon\Core\ConsoleOutputManager.cs
   ```

2. **ConsoleEntry.csä½œæˆ**
   ```bash
   # ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå ´æ‰€
   C:\Users\1010821\Desktop\python\andon\andon\Core\ConsoleEntry.cs
   ```

3. **è¨­å®šã‚¯ãƒ©ã‚¹è¿½åŠ **
   ```bash
   # ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå ´æ‰€
   C:\Users\1010821\Desktop\python\andon\andon\Core\ConsoleOutputSettings.cs
   ```

#### Phase 2: Program.csçµ±åˆ
1. **ä¾å­˜æ€§æ³¨å…¥è¨­å®š**
   - ServiceProvider ã«ConsoleOutputManagerè¿½åŠ 
   - IConfiguration ã‹ã‚‰ConsoleOutputSettingsèª­ã¿è¾¼ã¿
   - ãƒ­ã‚°gerFactory ã¨ã®é€£æº

2. **Console.WriteLineç½®ãæ›ãˆ**
   - æ—¢å­˜å‡ºåŠ›ç®‡æ‰€ã®ç‰¹å®šï¼ˆç´„20ç®‡æ‰€ï¼‰
   - æ®µéšçš„ç½®ãæ›ãˆå®Ÿè£…
   - å…ƒã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚‚ä¸¦è¡Œå®Ÿè¡Œ

#### Phase 3: IntelligentMonitoringSystemçµ±åˆ
1. **6ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼çµ±åˆ**
   ```csharp
   // Stepå®Ÿè¡Œæ™‚ã®å‡ºåŠ›ä¾‹
   await _consoleOutputManager.WriteProgressAsync(
       "Step 1å®Ÿè¡Œ: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰PLCæ¥ç¶šæƒ…å ±ã‚’å–å¾—",
       1, "Step1_ConfigurationLoad", 16.7);

   await _consoleOutputManager.WriteResultAsync(
       "Step 1å®Œäº†: PLCæ¥ç¶šå…ˆ='è£½é€ ãƒ©ã‚¤ãƒ³PLC' (172.30.40.15:8192)",
       1, "Step1_ConfigurationLoad",
       new { ConnectionTarget = "è£½é€ ãƒ©ã‚¤ãƒ³PLC", Host = "172.30.40.15", Port = 8192 });
   ```

2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±åˆ**
   ```csharp
   // ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®çµ±åˆå‡ºåŠ›
   await _consoleOutputManager.WriteErrorAsync(
       "Step 2ã§ReadTypeNameå¤±æ•—ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã‚’å®Ÿè¡Œ",
       "Communication", 2,
       new {
           ErrorType = "SlmpCommunicationException",
           FallbackAction = "Q00CPUæ¨å®šã§ç¶™ç¶š",
           OriginalError = ex.Message
       });
   ```

#### Phase 4: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼
1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**
   ```bash
   # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   dotnet test andon.Tests --filter "ConsoleOutputManager"
   ```

2. **çµ±åˆãƒ†ã‚¹ãƒˆ**
   ```bash
   # å…¨ã‚·ã‚¹ãƒ†ãƒ å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
   cd C:\Users\1010821\Desktop\python\andon
   dotnet run

   # å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
   cat logs/console_output.json
   cat logs/rawdata_analysis.log
   ```

3. **æˆåŠŸç¢ºèªé …ç›®**
   - [ ] console_output.jsonç”Ÿæˆ
   - [ ] å…¨CONSOLE_*ã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒ—è¨˜éŒ²
   - [ ] SessionIdé€£æºå‹•ä½œ
   - [ ] ãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆã‚¨ãƒ©ãƒ¼ãªã—
   - [ ] æ—¢å­˜çµ±åˆãƒ­ã‚°å‹•ä½œç¶™ç¶š
   - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿ãªã—

### ğŸ”„ å¾Œæ—¥å®Œå…¨å†ç¾æ‰‹é †

#### 1. ç’°å¢ƒæº–å‚™
```bash
# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¢ºèª
cd C:\Users\1010821\Desktop\python\andon

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
cp andon/Program.cs andon/Program.cs.backup.20251002
cp andon/appsettings.json andon/appsettings.json.backup.20251002
```

#### 2. ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆé †åºï¼ˆé‡è¦ï¼‰
1. **ConsoleEntry.cs** ï¼ˆãƒ‡ãƒ¼ã‚¿æ§‹é€ å®šç¾©ï¼‰
2. **ConsoleOutputSettings.cs** ï¼ˆè¨­å®šã‚¯ãƒ©ã‚¹ï¼‰
3. **ConsoleOutputManager.cs** ï¼ˆãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ ï¼‰
4. **appsettings.json** ï¼ˆè¨­å®šè¿½åŠ ï¼‰
5. **Program.cs** ï¼ˆçµ±åˆå®Ÿè£…ï¼‰

#### 3. å®Ÿè£…ç¢ºèªã‚³ãƒãƒ³ãƒ‰
```bash
# ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ç¢ºèª
dotnet build

# å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
dotnet run

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls -la logs/
head -20 logs/console_output.json
```

#### 4. æœŸå¾…ã•ã‚Œã‚‹æœ€çµ‚æˆæœç‰©
```bash
logs/
â”œâ”€â”€ rawdata_analysis.log          # æŠ€è¡“è©³ç´°ãƒ­ã‚°ï¼ˆæ—¢å­˜ï¼‰
â”œâ”€â”€ console_output.json           # NEW: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›JSON
â”œâ”€â”€ console_output_20251002.json  # ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
â””â”€â”€ intelligent_monitoring_log.log # æ—¢å­˜ãƒ­ã‚°ï¼ˆå½±éŸ¿ãªã—ï¼‰
```

### ğŸ“Š ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆã‚·ã‚¹ãƒ†ãƒ ã®åˆ©ç‚¹

#### æŠ€è¡“è€…å‘ã‘è©³ç´°æƒ…å ±ï¼ˆrawdata_analysis.logï¼‰
- SLMPãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿãƒ‡ãƒ¼ã‚¿
- é€šä¿¡ã‚¨ãƒ©ãƒ¼è©³ç´°
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ
- è¨ºæ–­æƒ…å ±

#### é‹ç”¨è€…å‘ã‘çŠ¶æ³æƒ…å ±ï¼ˆconsole_output.jsonï¼‰
- ã‚·ã‚¹ãƒ†ãƒ å®Ÿè¡ŒçŠ¶æ³
- 6ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼é€²è¡Œ
- ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šã‚µãƒãƒªãƒ¼
- æˆåŠŸãƒ»å¤±æ•—çµæœ

#### ç›¸äº’é€£æº
- åŒä¸€SessionIdã§ã®é–¢é€£ä»˜ã‘
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—åŒæœŸ
- å•é¡Œç™ºç”Ÿæ™‚ã®ä¸¡ãƒ­ã‚°å‚ç…§

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€æŠ€è¡“çš„è©³ç´°ã¨é‹ç”¨çŠ¶æ³ã®ä¸¡æ–¹ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã§ãã‚‹ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ãŒå®Ÿç¾ã•ã‚Œã¾ã™ã€‚