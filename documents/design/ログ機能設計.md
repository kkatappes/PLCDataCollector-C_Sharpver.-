# ログ機能設計

◆基本方針
    ・SLMP通信の可視化
    ・デバッグ/トラブルシューティング支援
    ・パフォーマンス分析と最適化に
    ・運用監視/メンテナンスの効率化
    ■データ取得元：全Step（Step1〜Step7）
    →全ステップの処理状況を把握する必要があるため

◆SLMPフレーム生バイナリデータ
    ・送信フレーム: 完全な16進数表現
    →リクエストの詳細内容を可視化
    ・受信フレーム: 完全な16進数表現
    →レスポンスの詳細内容を可視化
    ・16進数ダンプ: アドレス付き、ASCII表現付き
    →バイナリデータの構造化表示
    ・フレーム解析: ヘッダー、終了コード、データ部詳細
    →各フィールドの意味と内容の解釈
    ■データ取得元：Step2（通信フレーム構築）、Step4（PLCリクエスト送受信）
    →送信フレームはStep2で生成、受信フレームはStep4で取得

◆詳細SLMPフレーム解析
    ・サブヘッダー解析: 3E/4Eフレーム判定
    →フレーム種別の自動識別
    ・ネットワーク情報: ネットワーク番号、PC番号、ユニット情報
    →通信対象の詳細な識別情報
    ・終了コード詳細: エラー原因の具体的説明
    →エラー内容の人間可読な解釈
    ・データ部解析: ワード/ビット別の詳細解析
    →デバイスデータの構造化表示
    ■データ取得元：Step2（通信フレーム構築）、Step4（PLCリクエスト送受信）、Step6（受信データ解析）
    →サブヘッダー・ネットワーク情報はStep2・Step4、終了コードはStep4、データ部解析はStep6

◆アプリケーション状態情報
    ・セッション情報: 開始/終了、プロセスID、実行時間
    →アプリケーションライフサイクルの追跡
    ・設定情報詳細: SLMP設定、継続モード、タイムアウト等
    →実行時設定の完全な記録
    ・サイクル情報: サイクル番号、フェーズ、間隔
    →処理サイクルの詳細追跡
    ・処理状況: リアルタイムメッセージ、状態変化
    →動的な状態変化の記録
    ■データ取得元：全Step（Step1〜Step7）
    →設定情報はStep1、その他は全Step実行中に取得

◆統計・パフォーマンス情報
    ・実行統計: サイクル数、成功率、失敗率
    →処理効率と信頼性の定量評価
    ・応答時間分析: 平均、最大、最小、分布
    →通信パフォーマンスの詳細分析
    ・エラー統計: エラー種別、頻度、回復状況
    →エラー発生パターンの分析
    ・システム稼働状況: リソース使用量、パフォーマンス
    →システム負荷と効率性の監視
    ■データ取得元：全Step（Step1〜Step7）の実行結果
    →通信応答時間はStep3〜Step5、その他は全Stepの実行状況から算出

◆設定情報の詳細
    ・SLMP接続設定: 全パラメータの詳細
    →接続条件の完全な記録
        - IpAddress: PLC-接続先IPアドレス
        - Port: PLC-接続先Port
        - ConnectionType: PLC-接続先通信方式
        - UseTcp, IsBinary, FrameVersion等
    ・継続動作設定: エラーハンドリング、デフォルト値
    →異常時動作の設定内容
    ・タイムアウト・リトライ設定: 全設定値
    →通信制御パラメータの記録
    ・データ処理設定: データ管理に関する設定
    →データ処理方式の詳細記録
        - TargetName: ターゲット名
        - ContinuousDataMode: 連続値データ
        - DataRetentionDays: データ削除周期（日）
        - MonitoringIntervalMs: データ収集周期（ミリ秒）
    ・システムリソース設定: メモリ・リソース管理設定
    →システム負荷制御の詳細記録
        - MemoryLimitKB, MaxBufferSize, MemoryThresholdKB
        - LowMemoryMode: 省メモリ稼働
    ・データ転送設定: 外部転送に関する設定
    →データ送信条件の詳細記録
        - EnableTransfer: データ転送の有効/無効
        - DestinationIpAddress: データ送信先IPアドレス
        - DestinationPort: データ送信先Port
    ・ログ設定: 出力先、レベル、ローテーション
    →ログ管理設定の詳細
        - ConsoleOutput:
            - FilePath: "logs/terminal_output.txt" (コンソール出力ログファイルパス)
            - MaxFileSizeMB: 10 (最大ファイルサイズ)
            - MaxFileCount: 5 (最大ファイル数)
            - FlushIntervalMs: 1000 (フラッシュ間隔)
        - DetailedLog:
            - FilePath: "logs/rawdata_analysis.json" (詳細ログファイルパス)
            - MaxFileSizeMB: 50 (最大ファイルサイズ)
            - RetentionDays: 14 (保持期間)
        - LogLevel: "Debug" (ログ出力レベル既定値: 全出力)
            →初期運用時は詳細なデバッグ情報を確認するため既定値を全出力レベル（Debug/Verbose）に設定
            →実際の運用において問題解析・トラブルシューティングを効率的に実施するための設定
            →運用安定後は必要に応じてInfo/Warning/Errorレベルに変更可能
    ■データ取得元：Step1（設定ファイル条件の読み込み）
    →すべての設定情報はStep1で読み込まれた設定ファイルから取得

◆エラー・例外情報の詳細
    ・エラー分類: 通信エラー、タイムアウト、設定エラー等
    →エラー種別の体系的分類
    ・継続機能動作: エラー処理、デフォルト値返却
    →エラー時の復旧処理詳細
    ・リトライ処理: 試行回数、間隔、結果
    →再試行処理の追跡記録
    ・回復処理: 自動回復、状態復旧
    →システム回復プロセスの記録
    ■データ取得元：全Step（Step1〜Step7）のエラーハンドリング
    →設定エラー（Step1）、通信エラー（Step3・Step4・Step5）、データ解析エラー（Step6）、出力エラー（Step7）

◆時系列・関連情報
    ・SessionId: 関連ログのグループ化
    →処理セッション単位でのログ関連付け
    ・CycleNumber: サイクル内の処理順序
    →処理順序の正確な追跡
    ・タイムスタンプ: ミリ秒精度の時刻情報
    →高精度な時系列情報
    ・処理間隔: フェーズ間、サイクル間の時間
    →処理タイミングの詳細分析
    ■データ取得元：全Step（Step1〜Step7）の実行タイミング
    →SessionIdはアプリケーション開始時生成、CycleNumber・タイムスタンプ・処理間隔は各Step実行時に取得

◆デバイス解釈情報
    ・生データ: バイナリ、16進数、数値表現
    →複数形式でのデータ表現
    ・解釈結果: 人間が読める形式への変換
    →データの意味的解釈
    ・ステータス判定: ON/OFF、正常/異常等
    →状態情報の論理的判定結果
    ■データ取得元：Step6（受信データ解析）、Step7（解析後データ出力）
    →生データはStep4で受信、解釈結果・ステータス判定はStep6・Step7で実施
