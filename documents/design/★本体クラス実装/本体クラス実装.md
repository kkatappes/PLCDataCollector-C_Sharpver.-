# æœ¬ä½“ã‚¯ãƒ©ã‚¹å®Ÿè£…çŠ¶æ³

## æ¦‚è¦
andonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã‘ã‚‹æœ¬ä½“ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…çŠ¶æ³ã‚’è¨˜éŒ²ã€‚
ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚µã‚¤ã‚¯ãƒ«ï¼ˆStep2-7ï¼‰ã¯å®Ÿè£…æ¸ˆã¿ã€‚ç¶™ç¶šå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰å®Ÿç¾ã«å¿…è¦ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ ã¯æœªå®Ÿè£…ã€‚

**è©³ç´°ãªå®Ÿè£…è¨ˆç”»ã¯åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§**: `å®Ÿè£…è¨ˆç”»/å®Ÿè£…è¨ˆç”».md`

---

## å®Ÿè£…çŠ¶æ³ã‚µãƒãƒªãƒ¼

### âœ… å®Ÿè£…æ¸ˆã¿ - ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚µã‚¤ã‚¯ãƒ«ï¼ˆStep2-7ï¼‰
ä»¥ä¸‹ã®ã‚¯ãƒ©ã‚¹ã¯å®Œå…¨å®Ÿè£…æ¸ˆã¿ã§ã€å‹•ä½œç¢ºèªæ¸ˆã¿ï¼š

| ã‚¯ãƒ©ã‚¹å | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | å½¹å‰² | çŠ¶æ…‹ |
|---------|-------------|------|------|
| **PlcCommunicationManager** | `andon/Core/Managers/PlcCommunicationManager.cs` | PLCé€šä¿¡å‡¦ç†ï¼ˆStep3-6ï¼‰ | âœ… å®Œæˆ |
| **ConfigToFrameManager** | `andon/Core/Managers/ConfigToFrameManager.cs` | ãƒ•ãƒ¬ãƒ¼ãƒ æ§‹ç¯‰ï¼ˆStep2ï¼‰ | âœ… å®Œæˆ |
| **DataOutputManager** | `andon/Core/Managers/DataOutputManager.cs` | ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›ï¼ˆStep7ï¼‰ | âœ… å®Œæˆ |
| **MultiPlcConfigManager** | `andon/Core/Managers/MultiPlcConfigManager.cs` | è¤‡æ•°è¨­å®šç®¡ç† | âœ… å®Œæˆ |
| **MultiPlcCoordinator** | `andon/Core/Managers/MultiPlcCoordinator.cs` | ä¸¦åˆ—å®Ÿè¡Œèª¿æ•´ãƒ˜ãƒ«ãƒ‘ãƒ¼ | âœ… å®Œæˆ |
| **ExecutionOrchestrator** | `andon/Core/Controllers/ExecutionOrchestrator.cs` | è¤‡æ•°PLCä¸¦åˆ—å®Ÿè¡Œ | âš ï¸ éƒ¨åˆ†å®Ÿè£… |
| **SlmpFrameBuilder** | `andon/Utilities/SlmpFrameBuilder.cs` | ãƒ•ãƒ¬ãƒ¼ãƒ æ§‹ç¯‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ | âœ… å®Œæˆ |
| **SlmpDataParser** | `andon/Utilities/SlmpDataParser.cs` | ãƒ‡ãƒ¼ã‚¿ãƒ‘ãƒ¼ã‚¹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ | âœ… å®Œæˆ |
| **ConfigurationLoader** | `andon/Infrastructure/Configuration/ConfigurationLoader.cs` | è¨­å®šèª­ã¿è¾¼ã¿ï¼ˆJSONï¼‰ | âœ… å®Œæˆ |
| **ConfigurationLoaderExcel** | `andon/Infrastructure/Configuration/ConfigurationLoaderExcel.cs` | è¨­å®šèª­ã¿è¾¼ã¿ï¼ˆExcelï¼‰ | âœ… å®Œæˆ |

### âš ï¸ éƒ¨åˆ†å®Ÿè£… - ExecutionOrchestrator
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `andon/Core/Controllers/ExecutionOrchestrator.cs`

**å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰**:
- âœ… `ExecuteMultiPlcCycleAsync()` - è¤‡æ•°PLCä¸¦åˆ—å®Ÿè¡Œï¼ˆ1ã‚µã‚¤ã‚¯ãƒ«ï¼‰
- âœ… `ExecuteSinglePlcAsync()` - å˜ä¸€PLCå‡¦ç†

**æœªå®Ÿè£…ãƒ¡ã‚½ãƒƒãƒ‰**:
- âŒ `RunContinuousDataCycleAsync()` - ç¶™ç¶šãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¯ãƒ«å®Ÿè¡Œï¼ˆStep2-7ã‚’ç¹°ã‚Šè¿”ã—å®Ÿè¡Œï¼‰
- âŒ `GetMonitoringInterval()` - ç›£è¦–é–“éš”å–å¾—

### âŒ æœªå®Ÿè£… - å®Ÿè¡Œåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
ç¶™ç¶šå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰å®Ÿç¾ã«å¿…è¦ãªã‚¯ãƒ©ã‚¹ç¾¤ï¼ˆã™ã¹ã¦æœªå®Ÿè£…ï¼‰:

| å„ªå…ˆåº¦ | ã‚¯ãƒ©ã‚¹å | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | å½¹å‰² |
|-------|---------|-------------|------|
| ğŸ”´ **Phase 1** | | | **æœ€å°å‹•ä½œç’°å¢ƒæ§‹ç¯‰ï¼ˆæœ€å„ªå…ˆï¼‰** |
| 1 | **Program.cs** | `andon/Program.cs` | ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ |
| 2 | **ApplicationController** | `andon/Core/Controllers/ApplicationController.cs` | Step1åˆæœŸåŒ–ãƒ»å…¨ä½“åˆ¶å¾¡ |
| 3 | **AndonHostedService** | `andon/Services/AndonHostedService.cs` | ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ |
| 4 | **TimerService** | `andon/Services/TimerService.cs` | å‘¨æœŸå®Ÿè¡Œã‚¿ã‚¤ãƒãƒ¼ |
| 5 | **DependencyInjectionConfigurator** | `andon/Services/DependencyInjectionConfigurator.cs` | DIã‚³ãƒ³ãƒ†ãƒŠè¨­å®š |
| ğŸŸ¡ **Phase 2** | | | **å®Ÿé‹ç”¨å¯¾å¿œï¼ˆé«˜å„ªå…ˆåº¦ï¼‰** |
| 6 | **GracefulShutdownHandler** | `andon/Services/GracefulShutdownHandler.cs` | é©åˆ‡ãªçµ‚äº†å‡¦ç† |
| 7 | **LoggingManager** | `andon/Core/Managers/LoggingManager.cs` | ãƒ­ã‚°æ©Ÿèƒ½ |
| 8 | **ErrorHandler** | `andon/Core/Managers/ErrorHandler.cs` | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° |
| 9 | **ConfigurationWatcher** | `andon/Core/Controllers/ConfigurationWatcher.cs` | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦– |
| 10 | **CommandLineOptions** | `andon/CommandLineOptions.cs` | CLIå¯¾å¿œ |
| 11 | **ExitCodeManager** | `andon/ExitCodeManager.cs` | çµ‚äº†ã‚³ãƒ¼ãƒ‰ç®¡ç† |
| ğŸŸ¢ **Phase 3** | | | **é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰** |
| 12-20 | 9ã‚¯ãƒ©ã‚¹ | `andon/Services/` | éåŒæœŸãƒ»ä¸¦è¡Œå‡¦ç†ã‚µãƒãƒ¼ãƒˆ |
| âšª **Phase 4** | | | **ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼ˆä½å„ªå…ˆåº¦ï¼‰** |
| 21-22 | 2ã‚¯ãƒ©ã‚¹ | `andon/Utilities/` | CSVå‡ºåŠ›ãƒ»ãƒ‡ãƒ¼ã‚¿è»¢é€ |

---

## ç¾åœ¨ã®çŠ¶æ³ã®ç†è§£

### âœ… å®Œæˆã—ã¦ã„ã‚‹ã‚‚ã®ï¼ˆã‚¨ãƒ³ã‚¸ãƒ³éƒ¨åˆ†ï¼‰
**ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚µã‚¤ã‚¯ãƒ«ï¼ˆStep2-7ï¼‰ã¯å®Œå…¨å®Ÿè£…æ¸ˆã¿**:
- Step2: ConfigToFrameManager - ãƒ•ãƒ¬ãƒ¼ãƒ æ§‹ç¯‰
- Step3-6: PlcCommunicationManager - PLCé€šä¿¡å‡¦ç†
- Step7: DataOutputManager - ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›
- ä¸¦åˆ—å®Ÿè¡Œ: ExecutionOrchestrator.ExecuteMultiPlcCycleAsync()
- è£œåŠ©æ©Ÿèƒ½: MultiPlcCoordinator, SlmpFrameBuilder, SlmpDataParser

### âš ï¸ éƒ¨åˆ†å®Ÿè£…
**ExecutionOrchestrator** - 2ãƒ¡ã‚½ãƒƒãƒ‰æœªå®Ÿè£…:
- RunContinuousDataCycleAsync() - ç¶™ç¶šãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¯ãƒ«å®Ÿè¡Œ
- GetMonitoringInterval() - ç›£è¦–é–“éš”å–å¾—

### âŒ ä¸è¶³ã—ã¦ã„ã‚‹ã‚‚ã®ï¼ˆè»Šä½“ãƒ»é‹è»¢å¸­ãƒ»ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ï¼‰
**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ **ï¼ˆã™ã¹ã¦æœªå®Ÿè£…ï¼‰:
- èµ·å‹•ã™ã‚‹ä»•çµ„ã¿ï¼ˆProgram.csï¼‰
- åˆæœŸåŒ–ã™ã‚‹ä»•çµ„ã¿ï¼ˆApplicationControllerï¼‰
- å‘¨æœŸçš„ã«Step2-7ã‚’å®Ÿè¡Œã™ã‚‹ä»•çµ„ã¿ï¼ˆAndonHostedService, TimerServiceï¼‰
- DIã§ç¹‹ãä»•çµ„ã¿ï¼ˆDependencyInjectionConfiguratorï¼‰

### ä¾‹ãˆã§èª¬æ˜
```
ç¾åœ¨ã®çŠ¶æ…‹:
- ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆPlcCommunicationManager, ExecutionOrchestratorï¼‰ã¯å®Œæˆ
- è»Šä½“ãƒ»é‹è»¢å¸­ãƒ»ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ï¼ˆProgram.cs, ApplicationController, AndonHostedServiceï¼‰ãŒãªã„

â†’ ã‚¨ãƒ³ã‚¸ãƒ³ã¯å‹•ãã‘ã©ã€èµ·å‹•ãƒœã‚¿ãƒ³ãŒãªã„ã—ã€é‹è»¢ã™ã‚‹ä»•çµ„ã¿ãŒãªã„çŠ¶æ…‹
```

---

## å®Ÿè£…ã®é€²ã‚æ–¹

### Phase 1: æœ€å°å‹•ä½œç’°å¢ƒæ§‹ç¯‰ï¼ˆæœ€å„ªå…ˆï¼‰
**ç›®æ¨™**: ç¶™ç¶šå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã®åŸºæœ¬å‹•ä½œã‚’å®Ÿç¾

**å®Ÿè£…å¯¾è±¡**:
1. DependencyInjectionConfigurator - DIã‚³ãƒ³ãƒ†ãƒŠè¨­å®š
2. TimerService - å‘¨æœŸå®Ÿè¡Œã‚¿ã‚¤ãƒãƒ¼
3. ExecutionOrchestrator - 2ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ å®Ÿè£…
4. ApplicationController - Step1åˆæœŸåŒ–ãƒ»å…¨ä½“åˆ¶å¾¡
5. AndonHostedService - ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ
6. Program.cs - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

**å®Œäº†æ¡ä»¶**:
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã™ã‚‹ï¼ˆ`dotnet run`ã§ã‚¨ãƒ©ãƒ¼ãªã—ï¼‰
- Step1åˆæœŸåŒ–ãŒæˆåŠŸã™ã‚‹
- Step2-7ãŒå‘¨æœŸçš„ã«å®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆMonitoringIntervalMsé–“éš”ï¼‰
- Ctrl+Cã§é©åˆ‡ã«çµ‚äº†ã™ã‚‹

**è©³ç´°ãªå®Ÿè£…è¨ˆç”»**: `å®Ÿè£…è¨ˆç”».md` ã® Phase 1 å‚ç…§

### Phase 2: å®Ÿé‹ç”¨å¯¾å¿œï¼ˆé«˜å„ªå…ˆåº¦ï¼‰
**ç›®æ¨™**: å®Ÿé‹ç”¨ç’°å¢ƒã§å®‰å®šå‹•ä½œ

**å®Ÿè£…å¯¾è±¡**: GracefulShutdownHandler, LoggingManager, ErrorHandler, ConfigurationWatcher, CommandLineOptions, ExitCodeManager

**è©³ç´°ãªå®Ÿè£…è¨ˆç”»**: `å®Ÿè£…è¨ˆç”».md` ã® Phase 2 å‚ç…§

### Phase 3: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰
**ç›®æ¨™**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é«˜åº¦ãªæ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆ

**å®Ÿè£…å¯¾è±¡**: AsyncExceptionHandler, CancellationCoordinator, ResourceSemaphoreManager, ProgressReporter, ParallelExecutionController, OptionsConfigurator, ServiceLifetimeManager, MultiConfigDIIntegration, ResourceManager

**è©³ç´°ãªå®Ÿè£…è¨ˆç”»**: `å®Ÿè£…è¨ˆç”».md` ã® Phase 3 å‚ç…§

### Phase 4: ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼ˆä½å„ªå…ˆåº¦ï¼‰
**ç›®æ¨™**: ã‚ã‚‹ã¨ä¾¿åˆ©ã ãŒã€ãªãã¦ã‚‚å‹•ä½œã™ã‚‹æ©Ÿèƒ½

**å®Ÿè£…å¯¾è±¡**: CsvFileWriter, DataTransferManager

**è©³ç´°ãªå®Ÿè£…è¨ˆç”»**: `å®Ÿè£…è¨ˆç”».md` ã® Phase 4 å‚ç…§

---

## è¦æ±‚ã•ã‚Œã‚‹å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### åŸºæœ¬å®Ÿè¡Œãƒ•ãƒ­ãƒ¼
```
åˆæœŸåŒ–ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆ1å›å®Ÿè¡Œï¼‰: Step1
ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚µã‚¤ã‚¯ãƒ«ï¼ˆç¹°ã‚Šè¿”ã—å®Ÿè¡Œï¼‰: Step2-7
```

### ç¶™ç¶šå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
```
1. Step1ï¼ˆåˆæœŸè¨­å®šãƒ»ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆï¼‰ - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«1å›ã®ã¿å®Ÿè¡Œ
   ãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
   ãƒ»å„ç¨®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
   ãƒ»åˆæœŸåŒ–å‡¦ç†å®Œäº†

2. Step2-7ï¼ˆãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚µã‚¤ã‚¯ãƒ«ï¼‰ - MonitoringIntervalMsé–“éš”ã§ç¹°ã‚Šè¿”ã—å®Ÿè¡Œ
   ãƒ»Step2: é€šä¿¡ãƒ•ãƒ¬ãƒ¼ãƒ æ§‹ç¯‰ï¼ˆä½œæˆæ¸ˆã¿ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½¿ç”¨ï¼‰
   ãƒ»Step3: PLCæ¥ç¶šå‡¦ç†
   ãƒ»Step4: ãƒ‡ãƒ¼ã‚¿é€å—ä¿¡
   ãƒ»Step5: PLCåˆ‡æ–­å‡¦ç†
   ãƒ»Step6: å—ä¿¡ãƒ‡ãƒ¼ã‚¿è§£æ
   ãƒ»Step7: ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›
   ãƒ»å¾…æ©Ÿ: MonitoringIntervalMså¾…æ©Ÿå¾Œã€Step2ã«æˆ»ã‚‹
```

### å®Ÿè£…çŠ¶æ³ãƒãƒƒãƒ”ãƒ³ã‚°
| ã‚¹ãƒ†ãƒƒãƒ— | æ©Ÿèƒ½ | å®Ÿè£…çŠ¶æ³ |
|---------|------|---------|
| **Step1ï¼ˆåˆæœŸåŒ–ãƒ•ã‚§ãƒ¼ã‚ºï¼‰** | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ | âš ï¸ éƒ¨åˆ†å®Ÿè£…ï¼ˆConfigToFrameManagerï¼‰ |
| | å„ç¨®ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ | âŒ æœªå®Ÿè£…ï¼ˆApplicationControllerï¼‰ |
| | åˆæœŸåŒ–å‡¦ç†å®Œäº† | âŒ æœªå®Ÿè£… |
| **Step2-7ï¼ˆãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚µã‚¤ã‚¯ãƒ«ï¼‰** | Step2: é€šä¿¡ãƒ•ãƒ¬ãƒ¼ãƒ æ§‹ç¯‰ | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆConfigToFrameManagerï¼‰ |
| | Step3: PLCæ¥ç¶šå‡¦ç† | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆPlcCommunicationManagerï¼‰ |
| | Step4: ãƒ‡ãƒ¼ã‚¿é€å—ä¿¡ | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆPlcCommunicationManagerï¼‰ |
| | Step5: PLCåˆ‡æ–­å‡¦ç† | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆPlcCommunicationManagerï¼‰ |
| | Step6: å—ä¿¡ãƒ‡ãƒ¼ã‚¿è§£æ | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆPlcCommunicationManagerï¼‰ |
| | Step7: ãƒ‡ãƒ¼ã‚¿å‡ºåŠ› | âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆDataOutputManagerï¼‰ |
| **ç¶™ç¶šå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰** | MonitoringIntervalMsé–“éš”ã§ç¹°ã‚Šè¿”ã— | âŒ æœªå®Ÿè£…ï¼ˆTimerServiceï¼‰ |
| | ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œåˆ¶å¾¡ | âŒ æœªå®Ÿè£…ï¼ˆAndonHostedServiceï¼‰ |
| | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“åˆ¶å¾¡ | âŒ æœªå®Ÿè£…ï¼ˆApplicationControllerï¼‰ |

---

## å‹•ä½œç¢ºèªæ–¹æ³•

### Phase 1 å®Œäº†å¾Œã®æœŸå¾…å‹•ä½œ
```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•
dotnet run

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:
# [INFO] AndonHostedService starting
# [INFO] Starting Step1 initialization
# [INFO] Step1 initialization completed
# [INFO] Starting continuous data cycle
# [INFO] Executing multi-PLC cycle...
# (MonitoringIntervalMså¾Œ)
# [INFO] Executing multi-PLC cycle...
# (ç¹°ã‚Šè¿”ã—)

# Ctrl+Cã§çµ‚äº†æ™‚:
# [INFO] AndonHostedService stopping
# [INFO] Stopping application
```

---

## å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### å®Ÿè£…è¨ˆç”»
- **å®Ÿè£…è¨ˆç”».md** - Phaseåˆ¥ã®è©³ç´°ãªå®Ÿè£…è¨ˆç”»ï¼ˆæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ä½µèª­ï¼‰

### è¨­è¨ˆæ›¸
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ è¨­è¨ˆ.md** - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æ§‹é€ è¨­è¨ˆ
- **ã‚¯ãƒ©ã‚¹è¨­è¨ˆ.md** - å„ã‚¯ãƒ©ã‚¹ã®è©³ç´°è¨­è¨ˆ
- **ãƒ†ã‚¹ãƒˆå†…å®¹.md** - ãƒ†ã‚¹ãƒˆè¨ˆç”»
- **å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ.md** - å®Ÿè£…é€²æ—ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

---

## ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ä¸€è¦§

### å®Ÿè£…æ¸ˆã¿ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå¥‘ç´„å®šç¾©ï¼‰
ã™ã¹ã¦ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯æ—¢ã«å®šç¾©æ¸ˆã¿ã€‚å®Ÿè£…ã‚¯ãƒ©ã‚¹ä½œæˆæ™‚ã«ç¶™æ‰¿ã—ã¦ä½¿ç”¨ã€‚

| ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
|---------------|-------------|
| IApplicationController | `andon/Core/Interfaces/IApplicationController.cs` |
| IExecutionOrchestrator | `andon/Core/Interfaces/IExecutionOrchestrator.cs` |
| IConfigurationWatcher | `andon/Core/Interfaces/IConfigurationWatcher.cs` |
| IConfigToFrameManager | `andon/Core/Interfaces/IConfigToFrameManager.cs` |
| IPlcCommunicationManager | `andon/Core/Interfaces/IPlcCommunicationManager.cs` |
| IDataOutputManager | `andon/Core/Interfaces/IDataOutputManager.cs` |
| ILoggingManager | `andon/Core/Interfaces/ILoggingManager.cs` |
| IErrorHandler | `andon/Core/Interfaces/IErrorHandler.cs` |
| IResourceManager | `andon/Core/Interfaces/IResourceManager.cs` |
| IAsyncExceptionHandler | `andon/Core/Interfaces/IAsyncExceptionHandler.cs` |
| ICancellationCoordinator | `andon/Core/Interfaces/ICancellationCoordinator.cs` |
| IResourceSemaphoreManager | `andon/Core/Interfaces/IResourceSemaphoreManager.cs` |
| IProgressReporter | `andon/Core/Interfaces/IProgressReporter.cs` |
| IParallelExecutionController | `andon/Core/Interfaces/IParallelExecutionController.cs` |
| ITimerService | `andon/Core/Interfaces/ITimerService.cs` |
| IMultiConfigDIIntegration | `andon/Core/Interfaces/IMultiConfigDIIntegration.cs` |

---

## å®Ÿè£…æ™‚ã®å…±é€šæ³¨æ„ç‚¹

### 1. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨å®Ÿè£…ã‚¯ãƒ©ã‚¹ã®å¯¾å¿œ
```csharp
// ä¾‹: ApplicationController
public class ApplicationController : IApplicationController
{
    // IApplicationControllerã§å®šç¾©ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…
}
```

### 2. DIè¨­å®šã§ã®ç™»éŒ²
```csharp
// DependencyInjectionConfigurator.cs
services.AddSingleton<IApplicationController, ApplicationController>();
services.AddTransient<ITimerService, TimerService>();
```

### 3. ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã®é¸æŠ
- **Singleton**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§1ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆApplicationController, LoggingManagerç­‰ï¼‰
- **Transient**: å‘¼ã³å‡ºã—ã”ã¨ã«æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆExecutionOrchestrator, PlcCommunicationManagerç­‰ï¼‰

### 4. éåŒæœŸå‡¦ç†ã®å¾¹åº•
```csharp
public async Task<InitializationResult> InitializeAsync(CancellationToken cancellationToken)
{
    await SomeAsyncOperation();
}
```

### 5. ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¼æ’­
```csharp
public async Task ExecuteAsync(CancellationToken cancellationToken)
{
    while (!cancellationToken.IsCancellationRequested)
    {
        // å‡¦ç†
    }
}
```

### 6. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```csharp
try
{
    await SomeOperation();
}
catch (Exception ex)
{
    await _loggingManager.LogError(ex, "Operation failed");
    throw;
}
```

---

## ä½œæˆæ—¥æ™‚
- **ä½œæˆæ—¥**: 2025å¹´1æœˆ27æ—¥
- **æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ27æ—¥
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|-----------|---------|
| 2025-11-27 | 2.0 | æ–‡æ›¸ã‚’ç°¡æ½”åŒ–: å®Ÿè£…è¨ˆç”»ã‚’åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆå®Ÿè£…è¨ˆç”».mdï¼‰ã«åˆ†é›¢ã€å®Ÿè£…çŠ¶æ³ã‚µãƒãƒªãƒ¼ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸæ§‹æˆã«å¤‰æ›´ |
| 2025-11-27 | 1.3 | ExecuteSingleCycleAsync()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‰Šé™¤: å˜ç™ºå®Ÿè¡Œæ©Ÿèƒ½ä¸è¦ã®ãŸã‚ |
| 2025-01-27 | 1.2 | ExecutionOrchestratorã®å®Ÿè£…çŠ¶æ³ã‚’æ­£ç¢ºã«åæ˜  |
| 2025-01-27 | 1.1 | è¨­è¨ˆæ›¸æº–æ‹ ã«ä¿®æ­£ |
| 2025-01-27 | 1.0 | åˆç‰ˆä½œæˆ |
