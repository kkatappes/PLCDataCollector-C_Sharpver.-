================================================================================
                         SLMP Andonシステム ログ出力機能 使用方法
================================================================================

概要:
  このシステムはSLMP通信の生データ解析とロギング機能を提供します。
  通信成功時の詳細な情報をファイルに保存し、後から分析できます。

================================================================================
■ ログ出力機能を使用する方法
================================================================================

【方法1: バッチファイルを使用（推奨）】

  1. 「run_rawdata_logging.bat」をダブルクリックして実行

  ✓ 自動的にrawdataパラメータが付与されて実行されます
  ✓ ログディレクトリの作成も自動で行われます
  ✓ 実行後にログファイルの作成確認も表示されます

【方法2: コマンドラインから手動実行】

  1. コマンドプロンプトまたはPowerShellを開く
  2. このフォルダ（andon.exeがある場所）に移動
  3. 以下のコマンドを実行:

     andon.exe rawdata

【方法3: 通常実行（パラメータなし）】

  andon.exe（パラメータなし）で実行した場合:
  - 継続機能のデモが実行されます
  - 生データロギングは行われません
  - 統計情報のみ表示されます

================================================================================
■ 出力されるログファイル
================================================================================

実行後、以下のファイルが作成されます:

【テキストログファイル】
  ファイル名: logs/rawdata_analysis.log
  内容:
    - タイムスタンプ付きの通信ログ
    - 16進ダンプ形式の生データ表示
    - SLMPフレーム解析結果
    - 通信統計情報

  例:
    2025-09-24 16:43:21.123 [INFO] SLMP通信開始
    2025-09-24 16:43:21.125 [DATA] 送信データ (12 bytes):
    50 00 00 FF FF 03 00 0C 00 10 00 01 04 00 00 D2 00 04
    2025-09-24 16:43:21.127 [ANALYSIS] SLMPフレーム解析:
    - フレームタイプ: 4E
    - コマンド: 0401 (デバイス読み出し)
    - データ長: 12 bytes

【JSONログファイル】
  ファイル名: logs/rawdata_analysis.json
  内容:
    - 構造化された通信データ
    - 解析結果の詳細情報
    - 統計データ
    - 機械読み取り可能な形式

================================================================================
■ トラブルシューティング
================================================================================

【ログファイルが作成されない場合】

  1. 実行方法を確認
     ❌ andon.exe だけで実行 → ログ出力されません
     ✅ andon.exe rawdata で実行 → ログ出力されます
     ✅ run_rawdata_logging.bat で実行 → ログ出力されます

  2. 権限を確認
     - 実行フォルダに書き込み権限があることを確認
     - 必要に応じて管理者権限で実行

  3. ディスク容量を確認
     - ログファイル用の十分な空き容量があることを確認

【ログファイルの場所がわからない場合】

  ログファイルは以下の場所に保存されます:
  - andon.exeと同じフォルダの「logs」サブフォルダ内
  - 絶対パス例: C:\...\andon\dist\logs\rawdata_analysis.log

================================================================================
■ 設定ファイル（appsettings.json）について
================================================================================

ログ出力の詳細設定は appsettings.json で変更できます:

"RawDataLoggingSettings": {
  "EnableRawDataAnalysis": true,        // 生データ解析の有効/無効
  "EnableHexDump": true,                // 16進ダンプの有効/無効
  "EnableDetailedFrameAnalysis": true,  // 詳細フレーム解析の有効/無効
  "EnableFileLogging": true,            // ファイル出力の有効/無効
  "LogFilePath": "logs/rawdata_analysis.log",     // ログファイルパス
  "JsonExportPath": "logs/rawdata_analysis.json", // JSONファイルパス
  "MaxLogFileSizeMB": 50,               // ログファイル最大サイズ
  "MaxLogFiles": 10                     // 保持するログファイル数
}

================================================================================
■ よくある質問
================================================================================

Q: 別のPCにコピーして使用できますか？
A: はい。distフォルダ全体をコピーして、run_rawdata_logging.batを実行してください。

Q: PLC接続なしでもテストできますか？
A: はい。接続失敗時も継続機能によりデフォルト値でテストが継続されます。

Q: ログファイルが大きくなりすぎませんか？
A: 自動ローテーション機能により、設定サイズを超えると新しいファイルが作成されます。

================================================================================
作成日: 2025-09-24
最終更新: 2025-09-24
================================================================================